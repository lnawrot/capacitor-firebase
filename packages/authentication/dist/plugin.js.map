{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst FirebaseAuthentication = registerPlugin('FirebaseAuthentication', {\n    web: () => import('./web').then(m => new m.FirebaseAuthenticationWeb()),\n});\nexport * from './definitions';\nexport { FirebaseAuthentication };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nimport { signInWithEmailLink, sendSignInLinkToEmail, connectAuthEmulator, FacebookAuthProvider, getAuth, GoogleAuthProvider, OAuthCredential, OAuthProvider, signInWithCustomToken, signInWithPopup, } from 'firebase/auth';\nexport class FirebaseAuthenticationWeb extends WebPlugin {\n    constructor() {\n        super();\n        const auth = getAuth();\n        auth.onAuthStateChanged(user => this.handleAuthStateChange(user));\n    }\n    async getCurrentUser() {\n        const auth = getAuth();\n        const userResult = this.createUserResult(auth.currentUser);\n        const result = {\n            user: userResult,\n        };\n        return result;\n    }\n    async getIdToken() {\n        var _a;\n        const auth = getAuth();\n        const idToken = await ((_a = auth.currentUser) === null || _a === void 0 ? void 0 : _a.getIdToken());\n        const result = {\n            token: idToken || '',\n        };\n        return result;\n    }\n    async setLanguageCode(options) {\n        const auth = getAuth();\n        auth.languageCode = options.languageCode;\n    }\n    async signInWithApple() {\n        const provider = new OAuthProvider('apple.com');\n        const auth = getAuth();\n        const result = await signInWithPopup(auth, provider);\n        const credential = OAuthProvider.credentialFromResult(result);\n        return this.createSignInResult(result.user, credential);\n    }\n    async signInWithFacebook() {\n        const provider = new FacebookAuthProvider();\n        const auth = getAuth();\n        const result = await signInWithPopup(auth, provider);\n        const credential = FacebookAuthProvider.credentialFromResult(result);\n        return this.createSignInResult(result.user, credential);\n    }\n    async signInWithGithub() {\n        const provider = new OAuthProvider('github.com');\n        const auth = getAuth();\n        const result = await signInWithPopup(auth, provider);\n        const credential = OAuthProvider.credentialFromResult(result);\n        return this.createSignInResult(result.user, credential);\n    }\n    async signInWithGoogle() {\n        const provider = new GoogleAuthProvider();\n        const auth = getAuth();\n        const result = await signInWithPopup(auth, provider);\n        const credential = GoogleAuthProvider.credentialFromResult(result);\n        return this.createSignInResult(result.user, credential);\n    }\n    async signInWithMicrosoft() {\n        const provider = new OAuthProvider('microsoft.com');\n        const auth = getAuth();\n        const result = await signInWithPopup(auth, provider);\n        const credential = OAuthProvider.credentialFromResult(result);\n        return this.createSignInResult(result.user, credential);\n    }\n    async signInWithPlayGames() {\n        throw new Error('Not available on web.');\n    }\n    async signInWithTwitter() {\n        const provider = new OAuthProvider('twitter.com');\n        const auth = getAuth();\n        const result = await signInWithPopup(auth, provider);\n        const credential = OAuthProvider.credentialFromResult(result);\n        return this.createSignInResult(result.user, credential);\n    }\n    async signInWithYahoo() {\n        const provider = new OAuthProvider('yahoo.com');\n        const auth = getAuth();\n        const result = await signInWithPopup(auth, provider);\n        const credential = OAuthProvider.credentialFromResult(result);\n        return this.createSignInResult(result.user, credential);\n    }\n    async signInWithPhoneNumber(_options) {\n        throw new Error('Not implemented on web.');\n    }\n    async signInWithCustomToken(options) {\n        const auth = getAuth();\n        const result = await signInWithCustomToken(auth, options.token);\n        return this.createSignInResult(result.user, null);\n    }\n    async sendSignInLinkToEmail(options) {\n        const auth = getAuth();\n        return sendSignInLinkToEmail(auth, options.email, options.settings);\n    }\n    async signInWithEmailLink({ email, url }) {\n        const auth = getAuth();\n        const result = await signInWithEmailLink(auth, email, url);\n        return this.createSignInResult(result.user, null);\n    }\n    async signOut() {\n        const auth = getAuth();\n        await auth.signOut();\n    }\n    async useAppLanguage() {\n        const auth = getAuth();\n        auth.useDeviceLanguage();\n    }\n    async useEmulator(options) {\n        const auth = getAuth();\n        const port = options.port || 9099;\n        connectAuthEmulator(auth, `${options.host}:${port}`);\n    }\n    handleAuthStateChange(user) {\n        const userResult = this.createUserResult(user);\n        const change = {\n            user: userResult,\n        };\n        this.notifyListeners('authStateChange', change);\n    }\n    createSignInResult(user, credential) {\n        const userResult = this.createUserResult(user);\n        const credentialResult = this.createCredentialResult(credential);\n        const result = {\n            user: userResult,\n            credential: credentialResult,\n        };\n        return result;\n    }\n    createUserResult(user) {\n        if (!user) {\n            return null;\n        }\n        const result = {\n            displayName: user.displayName,\n            email: user.email,\n            emailVerified: user.emailVerified,\n            isAnonymous: user.isAnonymous,\n            phoneNumber: user.phoneNumber,\n            photoUrl: user.photoURL,\n            providerId: user.providerId,\n            tenantId: user.tenantId,\n            uid: user.uid,\n        };\n        return result;\n    }\n    createCredentialResult(credential) {\n        if (!credential) {\n            return null;\n        }\n        const result = {\n            providerId: credential.providerId,\n        };\n        if (credential instanceof OAuthCredential) {\n            result.accessToken = credential.accessToken;\n            result.idToken = credential.idToken;\n            result.secret = credential.secret;\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin","auth","getAuth","OAuthProvider","signInWithPopup","FacebookAuthProvider","GoogleAuthProvider","signInWithCustomToken","sendSignInLinkToEmail","signInWithEmailLink","connectAuthEmulator","OAuthCredential"],"mappings":"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"}